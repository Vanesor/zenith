                                                                                    Table "public.users"
               Column                |            Type             | Collation | Nullable |                                             Default                                             
-------------------------------------+-----------------------------+-----------+----------+-------------------------------------------------------------------------------------------------
 id                                  | uuid                        |           | not null | uuid_generate_v4()
 email                               | character varying           |           | not null | 
 password_hash                       | character varying           |           | not null | 
 name                                | character varying           |           | not null | 
 username                            | character varying           |           |          | 
 avatar                              | text                        |           |          | 
 role                                | character varying           |           | not null | 'student'::character varying
 club_id                             | character varying           |           |          | 
 bio                                 | text                        |           |          | 
 social_links                        | jsonb                       |           |          | '{}'::jsonb
 preferences                         | jsonb                       |           |          | '{}'::jsonb
 created_at                          | timestamp with time zone    |           |          | CURRENT_TIMESTAMP
 updated_at                          | timestamp with time zone    |           |          | CURRENT_TIMESTAMP
 profile_image_url                   | text                        |           |          | 
 profile_images                      | jsonb                       |           |          | '[]'::jsonb
 verification_photo_url              | text                        |           |          | 
 phone_number                        | character varying           |           |          | 
 date_of_birth                       | date                        |           |          | 
 address                             | text                        |           |          | 
 emergency_contact                   | jsonb                       |           |          | '{}'::jsonb
 phone                               | character varying           |           |          | 
 location                            | character varying           |           |          | 
 website                             | character varying           |           |          | 
 github                              | character varying           |           |          | 
 linkedin                            | character varying           |           |          | 
 twitter                             | character varying           |           |          | 
 email_verified                      | boolean                     |           |          | false
 email_verification_token            | character varying           |           |          | 
 email_verification_token_expires_at | timestamp without time zone |           |          | 
 password_reset_token                | character varying           |           |          | 
 password_reset_token_expires_at     | timestamp without time zone |           |          | 
 oauth_provider                      | character varying           |           |          | 
 oauth_id                            | character varying           |           |          | 
 oauth_data                          | jsonb                       |           |          | 
 has_password                        | boolean                     |           |          | true
 totp_secret                         | character varying           |           |          | 
 totp_temp_secret                    | character varying           |           |          | 
 totp_temp_secret_created_at         | timestamp without time zone |           |          | 
 totp_enabled                        | boolean                     |           |          | false
 totp_enabled_at                     | timestamp without time zone |           |          | 
 totp_recovery_codes                 | jsonb                       |           |          | 
 notification_preferences            | jsonb                       |           |          | '{"email": {"events": true, "results": true, "assignments": true, "discussions": true}}'::jsonb
 email_otp_enabled                   | boolean                     |           |          | false
 email_otp_verified                  | boolean                     |           |          | false
 email_otp_secret                    | character varying           |           |          | 
 email_otp_backup_codes              | jsonb                       |           |          | '[]'::jsonb
 email_otp_last_used                 | timestamp with time zone    |           |          | 
 email_otp_created_at                | timestamp with time zone    |           |          | 
 email_otp                           | character(6)                |           |          | 
 email_otp_expires_at                | timestamp with time zone    |           |          | 
 last_activity                       | timestamp with time zone    |           |          | CURRENT_TIMESTAMP
Indexes:
    "users_pkey" PRIMARY KEY, btree (id)
    "idx_users_club_id" btree (club_id)
    "idx_users_created_at" btree (created_at)
    "idx_users_email" btree (email)
    "idx_users_last_activity" btree (last_activity)
    "idx_users_role" btree (role)
    "users_email_key" UNIQUE CONSTRAINT, btree (email)
Referenced by:
    TABLE "carousel_slides" CONSTRAINT "carousel_slides_created_by_fkey" FOREIGN KEY (created_by) REFERENCES users(id)
    TABLE "chat_attachments" CONSTRAINT "chat_attachments_user_id_fkey" FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
    TABLE "comment_likes" CONSTRAINT "comment_likes_user_id_fkey" FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
    TABLE "content_permissions" CONSTRAINT "content_permissions_granted_by_fkey" FOREIGN KEY (granted_by) REFERENCES users(id)
    TABLE "content_permissions" CONSTRAINT "content_permissions_user_id_fkey" FOREIGN KEY (user_id) REFERENCES users(id)
    TABLE "featured_events" CONSTRAINT "featured_events_created_by_fkey" FOREIGN KEY (created_by) REFERENCES users(id)
    TABLE "chat_messages" CONSTRAINT "fk_chat_messages_edited_by" FOREIGN KEY (edited_by) REFERENCES users(id)
    TABLE "chat_rooms" CONSTRAINT "fk_chat_rooms_edited_by" FOREIGN KEY (edited_by) REFERENCES users(id)
    TABLE "page_content" CONSTRAINT "page_content_created_by_fkey" FOREIGN KEY (created_by) REFERENCES users(id)
    TABLE "task_activity" CONSTRAINT "task_activity_user_id_fkey" FOREIGN KEY (user_id) REFERENCES users(id)
    TABLE "team_cards" CONSTRAINT "team_cards_created_by_fkey" FOREIGN KEY (created_by) REFERENCES users(id)
Triggers:
    update_users_updated_at BEFORE UPDATE ON users FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()

